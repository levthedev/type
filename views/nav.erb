<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Type</title>
    <link rel="stylesheet" href="/stylesheets/reset.css" type="text/css">
    <link rel="stylesheet" href="/stylesheets/nav.css" type="text/css">
    <script src="/js/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="https://js.stripe.com/v2/"></script>
    <script type="text/javascript">
      Stripe.setPublishableKey('pk_test_wNSmUtnjPppeeG0wiWFGZIN4')
      var $form = $('#payment-form')

      function stripeResponseHandler(status, response) {
        console.log(response)
        if (response.error) {
          $form.find('.payment-errors').text(response.error.message)
          $form.find('.submit').prop('disabled', false)
        } else {
          var token = response.id
          $form.append($('<input type="hidden" name="stripeToken">').val(token))
          $form.get(0).submit()
        }
      }

      $(function() {
        $form.submit(function(event) {
          $form.find('.submit').prop('disabled', true)
          Stripe.card.createToken($form, stripeResponseHandler)
          return false
        })
      })
    </script>
  </head>
  <body>
    <nav class="navBar wrapper">
      <nav class="wrapper">
        <div class="logo"></div>
        <input type="checkbox" id="menu-toggle">
          <label for="menu-toggle" class="label-toggle"></label>
        </input>
        <ul>
          <a id="price-link" href="#"><li>Pricing</li></a>
          <a href="#"><li>Login</li></a>
          <a href="/demo"><li>Demo</li></a>
        </ul>
      </nav>
    </nav>

    <div id='main'>
      <%= yield %>

      <form action="/your-charge-code" method="POST" id="payment-form">
      <span class="payment-errors"></span>

      <div class="form-row">
        <label>
          <span>Card Number</span>
          <input type="text" size="20" data-stripe="number">
        </label>
      </div>

      <div class="form-row">
        <label>
          <span>Expiration (MM/YY)</span>
          <input type="text" size="2" data-stripe="exp_month">
        </label>
        <span> / </span>
        <input type="text" size="2" data-stripe="exp_year">
      </div>

      <div class="form-row">
        <label>
          <span>CVC</span>
          <input type="text" size="4" data-stripe="cvc">
        </label>
      </div>

      <input type="submit" class="submit" value="Submit Payment">
    </form>
    </div>
  </body>
</html>
